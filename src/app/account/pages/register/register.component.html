<app-layout
	pageTitle="Register"
	subtitle="Lorem ipsum dolor sit, amet consectetur adipisicing elit."
	redirectLabel="Already have an account ?"
	redirectRouterLink="/account/signin"
	redirectLabelLink="Signin"
>
	<div templateForm>
		<form
			class="login-form"
			*ngIf="mainForm"
			[formGroup]="mainForm"
			(ngSubmit)="onMainFormSubmit()"
		>
			<app-alert
				*ngIf="showPasswordEqualError$ | async"
				severity="error"
				[message]="inputsValidationMessages.passwordEqual?.message"
			>
			</app-alert>

			<app-alert [message]="formErrorMessage" severity="error"></app-alert>

			<ng-container [formGroup]="personnalInfosForm">
				<div class="form-row">
					<app-text-field
						type="text"
						name="firstname"
						label="Firstname *"
						formControlName="firstname"
						groupName="personnalInfosForm"
						[parentForm]="mainForm"
						[validationMessage]="inputsValidationMessages.firstname"
					></app-text-field>

					<app-text-field
						type="text"
						name="lastname"
						label="Lastname *"
						formControlName="lastname"
						groupName="personnalInfosForm"
						[parentForm]="mainForm"
						[validationMessage]="inputsValidationMessages.lastname"
					></app-text-field>
				</div>

				<div class="form-row">
					<app-text-field
						type="text"
						name="username"
						label="Username *"
						formControlName="username"
						groupName="personnalInfosForm"
						[parentForm]="mainForm"
						[validationMessage]="inputsValidationMessages.username"
					></app-text-field>
				</div>

				<div class="form-row">
					<app-text-field
						type="text"
						name="email"
						label="Email *"
						formControlName="email"
						groupName="personnalInfosForm"
						[parentForm]="mainForm"
						[validationMessage]="inputsValidationMessages.email"
					></app-text-field>
				</div>
			</ng-container>

			<ng-container [formGroup]="passwordForm">
				<div class="form-row">
					<app-password-field
						name="password"
						label="Password *"
						[toggleMask]="true"
						[feedback]="false"
						formControlName="password"
						groupName="passwordForm"
						[parentForm]="mainForm"
						[validationMessage]="inputsValidationMessages.password"
					></app-password-field>

					<app-password-field
						name="confirmPassword"
						label="Confirm password *"
						[toggleMask]="true"
						[feedback]="false"
						formControlName="confirmPassword"
						groupName="passwordForm"
						[parentForm]="mainForm"
						[validationMessage]="inputsValidationMessages.confirmPassword"
					></app-password-field>
				</div>
			</ng-container>

			<app-button-rounded
				type="submit"
				severity="primary"
				[outline]="false"
				[disabled]="!mainForm.valid"
				>Register</app-button-rounded
			>
		</form>
	</div>
</app-layout>
